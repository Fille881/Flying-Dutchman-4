<!DOCTYPE html>
<html>
	<header>
		<link rel="stylesheet" type="text/css" href="stylesheet.css">
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
		<!-- <script type="text/javascript" src="javascript/scripts.js"></script> -->
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		
	<script type="text/javascript">
		
		
        //When DOM loaded we attach click event to button
        $(document).ready(function() {
            
			// ----- Navigation -----
			
			$("#btnAccounts").click(function(){
				 window.location.href = "accounts.html";
			})
			
			$("#btnHistory").click(function(){
				window.location.href = "history.html";
			})
			
			// ------------------------
			
			// ----- Order -----
			$("#btnOrder").click(function(){
				 alert( "Not yet implemented." );
			})
			// ----------------
          
			// url that gives a JSON object of all beverages
			var url =  "http://pub.jamaica-inn.net/fpdb/api.php?username=ervtod&password=ervtod&action=inventory_get";
              
              
                //start ajax request. All data from the url above is being put in data
                jQuery.get(url, function (data){
	               
	               
	               // creating counter to count all array items 
					var o = 20;
	                var total = 25;  //total is 166
	            

	            
				// while the o < total there is a new div created in the beers div. In that div the name, price and beer ID are placed.
	           while (o < total) {
		       
			    // In the newly created div there is an imageDiv placed which contains a static picture for now (heineken.jpg). The ID of the picture is a name from the beer that is used in the current  loop (e.g. data.payload[16].namn)
				
				$("#beers").append('<div class ="imageDiv" id="imageDiv'+ o +'" />');

                $("#imageDiv" + o).append('<input type="image" class="picture" src="heineken.jpg" width="80" height="80" id="' + data.payload[o].namn + '"  />')

				
				//$('#beers').append('<div class ="nameDiv" id="div'+ o +'" />');
				$("#imageDiv" + o).append("<br>" + data.payload[o].namn + " " + o + " " );
				
				

				
	
				
		
    
 
// below is an Flickr function that searches for pictures using the beername as a keyword. The results aren't really satisfying so we will manually download pictures for the beers :)
    
    
  /*
  $.getJSON("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=a4617ab6b61a288db5cd804c537f271d&jsoncallback=?&tags=" + data.payload[o].namn ,
        {
          tagmode: "any",
          per_page: "1",
          format: "json"
        },
        
        function(data) { 
		     
         $.each(data.photos.photo, function(i,item){
        src = "http://farm"+ item.farm + ".static.flickr.com/" + item.server + "/"+ item.id +"_"+ item.secret +"_m.jpg";
        $("#div" + o).append('<div class ="imageDiv" id="imageDiv'+ o +'" />');
        $("<img/>").attr( {"src": src, "width": 80, "height": 80}).appendTo("#imageDiv"+ o);
    });
   
	
	
	
	
	
        });
*/
       //return o;
       
       //alert();
          ++o;
          
          
 
    
    }
    
    // when clicking on a picure of a beer in the class 'picture', the variable beerID is made. The ID of the button clicked is attached to that variable.
 
    
    $('.picture').click(function() {
				beerId = $(this).attr('id');
					
					
				
					
				
				$("#overview ul").append("<li>" + beerId + "</li>");
          		
          		});

    });
    
    
   // });
   
   
    });

/*

function send() {



 			//element = document.getElementById(data.payload[o].beer_id);

var beerId = document.getElementById(this.id);
 			alert(beerId);

}
*/








    
</script>

</header>
	
<body>

<div id="headerWrapper">
	<div id="headerLogo">
		<h1> <img src="logo.jpg" alt="Stormy Weather"> </h1>
	</div>
	<div id="headerTitle">
		<h1> Ordering page </h1>
	</div>
</div>


  
<div id="container">
	<div id="beers"></div>
	<div id="overview">
		<ul id="orderList" class="list-unstyled"></ul>
	</div>	
</div>
	
	
<br>
<div class="buttonsDiv">
	<a href="#" id="btnOrder" class="btn">Order</a>
</div>

<br>
----------- only as bartender ------------
<br>
<div class="buttonsDiv">
	<a href="#" id="btnAccounts" class="btn">Accounts</a>
	<br>
	<br>
	<a href="#" id="btnHistory" class="btn">History</a>
</div>
------------------------------------------






</body>
</html>
