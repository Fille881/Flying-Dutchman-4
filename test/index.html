<!DOCTYPE html>
<html>
	<header>
		<link rel="stylesheet" type="text/css" href="stylesheet.css">
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
		<!-- <script type="text/javascript" src="javascript/scripts.js"></script> -->
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		
	<script type="text/javascript">
		
		
        //When DOM loaded we attach click event to button
        $(document).ready(function() {
            
          
			// url that gives a JSON object of all beverages
			var url =  "http://pub.jamaica-inn.net/fpdb/api.php?username=ervtod&password=ervtod&action=inventory_get";
              
              
                //start ajax request. All data from the url above is being put in data
                jQuery.get(url, function (data){
	               
	               
	               // creating counter to count all array items 
					var o = 20;
	                var total = 25;  //total is 166
	            

	            
				// while the o < total there is a new div created in the container div. In that div the name, price and beer ID are placed.
	           while (o < total) {
		       
			             
				$('#container').append('<div class ="nameDiv" id="div'+ o +'" />');
				$("#div"+ o).append(data.payload[o].namn + " " +  "(" +data.payload[o].price + ")" + o + " " + data.payload[o].beer_id );
				
				
				// In the newly created div there is an imageDiv placed which contains a static picture for now (heineken.jpg). The ID of the picture is a name from the beer that is used in the current  loop (e.g. data.payload[16].namn)
				
				$("#div" + o).append('<div class ="imageDiv" id="imageDiv'+ o +'" />');

                $("#imageDiv" + o).append('<input type="image" class="picture" src="heineken.jpg" width="80" height="80" id="' + data.payload[o].namn + '"  />')
				
	
				
		
    
 
// below is an Flickr function that searches for pictures using the beername as a keyword. The results aren't really satisfying so we will manually download pictures for the beers :)
    
    
  /*
  $.getJSON("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=a4617ab6b61a288db5cd804c537f271d&jsoncallback=?&tags=" + data.payload[o].namn ,
        {
          tagmode: "any",
          per_page: "1",
          format: "json"
        },
        
        function(data) { 
		     
         $.each(data.photos.photo, function(i,item){
        src = "http://farm"+ item.farm + ".static.flickr.com/" + item.server + "/"+ item.id +"_"+ item.secret +"_m.jpg";
        $("#div" + o).append('<div class ="imageDiv" id="imageDiv'+ o +'" />');
        $("<img/>").attr( {"src": src, "width": 80, "height": 80}).appendTo("#imageDiv"+ o);
    });
   
	
	
	
	
	
        });
*/
       //return o;
       
       //alert();
          ++o;
          
          
 
    
    }
    
    // when clicking on a picure of a beer in the class 'picture', the variable beerID is made. The ID of the button clicked is attached to that variable.
 
    
    $('.picture').click(function() {
				beerId = $(this).attr('id');
					
					
				
					
				$("#overview").append('<div class ="orderItem" id="orderItem'+ o +'" />');
				$("#orderItem" + o).append(beerId + "<br>");
          		
          		});

    });
    
    
   // });
   
   
    });

/*

function send() {



 			//element = document.getElementById(data.payload[o].beer_id);

var beerId = document.getElementById(this.id);
 			alert(beerId);

}
*/








    
</script>

</header>
	
<body>

<div class="headerDiv">
	<h1> Welcome to our COOOL site </h1>
</div>

<div class="centerDiv">
<button id="btn382" type="button" >Click to load all beers and pictures</button>   

<form action="stockPage.html">
    <input type="submit" value="Stockpage">
</form>

<form action="purchasesHistory.html">
    <input type="submit" value="Check purchases history">
</form>

<div id="bigcontainer">
	
<div id="container"></div>
	
<div id="overview"></div>
		
	
</div>



</body>
</html>
